#!/usr/bin/nesla
if (typeof(expect)!='function') include("_expect.nes");
function testb64() {
	if (typeof(base64)!='table') {
		print("SKIPPING BASE64 TESTS\n");
		return;
	}
	local bx = { p="stuff:null", e="c3R1ZmY6bnVsbA==" };
	local by = { p="null:stuff", e="bnVsbDpzdHVmZg==" };
	expect("base64.decode(bx.e)", "stuff:null",       base64.decode(bx.e));
	expect("base64.decode(by.e)", "null:stuff",       base64.decode(by.e));
	expect("base64.encode(bx.p)", "c3R1ZmY6bnVsbA==", base64.encode(bx.p));
	expect("base64.encode(by.p)", "bnVsbDpzdHVmZg==", base64.encode(by.p));
//	print("\n", base64.decode("UTogV2hhdCdzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYSBjb2NrZXIgc3BhbmllbCBhbmQgYSBwaXRidWxsIGh1bXBpbmcgeW91ciBsZWc/CkE6IFlvdSBsZXQgdGhlIHBpdGJ1bGwgZmluaXNoLg=="), "\n");
	return;
}
testb64();
global testb64=null;
