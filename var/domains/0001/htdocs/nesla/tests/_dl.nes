#!/usr/bin/nesla
if (typeof(expect)!='function') include("_expect.nes");
function testdl() {
	if (typeof(dl.loadlib)=='function') {
		print("\tloading libs...\n");
		io.flush();
		if (typeof(_SERVER)=='table') {
			rc=dl.loadlib("/usr/local/lib/nesla/libneslacrypto.so");
			rc=dl.loadlib("/usr/local/lib/nesla/libneslaext.so");
			rc=dl.loadlib("/usr/local/lib/nesla/libneslaregex.so");
			rc=dl.loadlib("/usr/local/lib/nesla/libneslatcp.so");
			rc=dl.loadlib("/usr/local/lib/nesla/libneslatest.so");
		} else {
			rc=dl.loadlib("lib/shared/libneslatest.so");
		}
		if (typeof(dltest)=='function') print("\t",dltest(),"\n");
	}
	return;
}
if (_ostype_!='OpenBSD/gcc') testdl();
global testdl=null;
