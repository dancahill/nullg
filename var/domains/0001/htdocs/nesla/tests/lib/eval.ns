#!/usr/bin/nesla
if (typeof(expect)!='function') include("_expect.ns");
function testeval() {
	if (typeof(eval)=='function') {
		expect("eval(\"5*5\")",      25,    eval("5*5"));
		expect("eval(5*42)",         210,   eval(5*42));
		expect("eval(\"xx='abc'\")", 'abc', eval("xx='abc'"));
		expect("eval(\"'def'\")",    'def', eval("'def'"));
//		print("[",xx,"]\n"); /* xx _should_ be 'abc' */

		z=eval;
		try {
			x=z("'zzz'");
		} catch (ex) {
			print("        exception[",ex.errno,"][",ex.errtext,"]\n");
		}
		expect("z(\"'zzz'\")", 0, x);

		x=eval("y=42");
		print("x=[",x,"]\n");
		print("y=[",y,"]\n");

		/*
		 * exec() is a kludge.  an ugly hack.  don't be shocked if it vanishes.
		 * eval() _should_ be able to do this stuff...
		 */
		x=exec("y=42;print(y,'\n');");
		print("x=[",x,"]\n");
		print("y=[",y,"]\n");

	}
	return;
}
testeval();
global testeval=null;
